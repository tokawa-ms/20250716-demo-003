# レトロテトリス - ゲーム仕様書

## ゲーム概要

### 基本コンセプト
- **ジャンル**: パズルゲーム（テトリス）
- **テーマ**: 80年代レトロアーケード
- **ターゲット**: 全年齢対象
- **プラットフォーム**: Webブラウザ（HTML5）

### ゲームの目的
落下してくるテトロミノ（4つのブロックで構成された図形）を操作して、画面下部に積み上げ、横一列を完成させてラインを消去し、高得点を目指す。

## ゲームルール

### 基本ルール
1. **テトロミノの落下**: 7種類のテトロミノが画面上部から順次落下
2. **操作**: プレイヤーはテトロミノを左右移動、回転、高速落下可能
3. **ライン消去**: 横一列が完全に埋まると消去され、上のブロックが落下
4. **得点**: ライン消去により得点を獲得、同時消去ライン数が多いほど高得点
5. **レベルアップ**: 一定ライン数消去でレベルが上昇し、落下速度が増加
6. **ゲームオーバー**: テトロミノが画面上部に到達するとゲーム終了

### テトロミノの種類

| 名前 | 形状 | 色 | 説明 |
|------|------|----|----- |
| I型 | ■■■■ | シアン | 4つのブロックが一直線 |
| O型 | ■■<br>■■ | 黄色 | 2×2の正方形 |
| T型 | ■■■<br>&nbsp;■ | マゼンタ | T字形状 |
| S型 | &nbsp;■■<br>■■ | 緑色 | S字形状 |
| Z型 | ■■<br>&nbsp;■■ | 赤色 | Z字形状 |
| J型 | ■<br>■■■ | 青色 | J字形状 |
| L型 | &nbsp;&nbsp;■<br>■■■ | オレンジ | L字形状 |

## 操作方法

### キーボード操作
- **←** : 左に移動
- **→** : 右に移動  
- **↓** : 高速落下（ソフトドロップ）
- **↑** : 時計回りに回転
- **SPACE** : 一時停止/再開

### モバイル操作
- **←ボタン** : 左に移動
- **→ボタン** : 右に移動
- **↓ボタン** : 高速落下
- **↻ボタン** : 回転
- **PAUSEボタン** : 一時停止

## スコアシステム

### 基本得点
- **1ライン消去**: 100点 × レベル
- **2ライン消去**: 300点 × レベル
- **3ライン消去**: 500点 × レベル
- **4ライン消去**: 800点 × レベル（テトリス）

### レベルシステム
- **初期レベル**: 1
- **レベルアップ条件**: 10ライン消去毎
- **落下速度**: レベル上昇に伴い高速化
- **最大レベル**: 制限なし

### 統計情報
- **現在スコア**: リアルタイム表示
- **現在レベル**: リアルタイム表示
- **消去ライン数**: 累計表示

## ゲーム画面構成

### レイアウト
```
┌─────────────────────────────────────────────┐
│                RETRO TETRIS                 │
├───────────┬─────────────────┬───────────────┤
│  NEXT     │                 │    SCORE      │
│  ┌─────┐  │                 │    ######     │
│  │     │  │    ゲームボード    │               │
│  └─────┘  │                 │    LEVEL      │
│           │                 │      ##       │
│ CONTROLS  │                 │               │
│  ← →      │                 │    LINES      │
│  ↓ ↑      │                 │      ###      │
│  SPACE    │                 │               │
│           │                 │    MUSIC      │
│           │                 │    🎵 ON      │
└───────────┴─────────────────┴───────────────┘
│              モバイル操作ボタン                │
└─────────────────────────────────────────────┘
```

### UI要素詳細

#### メインゲームボード
- **サイズ**: 10列 × 20行
- **描画**: HTML5 Canvas
- **エフェクト**: ネオングロー、パーティクル

#### サイドパネル
- **次のピース**: 次に落下するテトロミノを表示
- **スコア表示**: 現在スコア、レベル、ライン数
- **操作説明**: キーボード操作の説明
- **音楽制御**: BGMのON/OFF切り替え

## 技術仕様

### 描画システム
- **Canvas API**: ゲームボードとテトロミノの描画
- **アニメーション**: requestAnimationFrame使用
- **エフェクト**: CSS3とJavaScriptによるビジュアルエフェクト

### 音楽・効果音
- **Web Audio API**: リアルタイム音楽生成
- **BGM**: コロベイニキのメロディー（スクエア波）
- **効果音**: ライン消去、ゲームオーバー等

### ゲームループ
```javascript
function gameLoop() {
    if (gameRunning && !gamePaused) {
        // 自動落下処理
        if (currentTime - dropTime > dropInterval) {
            movePiece(0, 1);
            dropTime = currentTime;
        }
        
        // BGM再生
        if (musicPlaying) {
            playBackgroundMusic();
        }
    }
    
    requestAnimationFrame(gameLoop);
}
```

## デザインガイドライン

### カラーパレット
- **背景**: ダークブルーグラデーション (#1a1a2e → #16213e → #0f3460)
- **メインカラー**: ネオングリーン (#00ff00)
- **アクセント**: シアン (#00ffff)、マゼンタ (#ff00ff)、イエロー (#ffff00)
- **テキスト**: ホワイト、ネオングリーン

### フォント
- **メインフォント**: Orbitron (Google Fonts)
- **ウェイト**: 400, 700, 900
- **スタイル**: モノスペース風、未来的

### エフェクト
- **グロー効果**: text-shadow、box-shadow使用
- **スキャンライン**: CRTモニター風エフェクト
- **パーティクル**: ライン消去時のアニメーション
- **グラデーション**: 背景とボタンのビジュアル強化

## パフォーマンス要件

### 最小動作環境
- **ブラウザ**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **JavaScript**: ES6+対応
- **Canvas**: HTML5 Canvas API対応
- **Audio**: Web Audio API対応（BGM用）

### 推奨動作環境
- **CPU**: 2GHz以上
- **メモリ**: 4GB以上
- **画面解像度**: 1024×768以上
- **ネットワーク**: 初回読み込み用（CDN）

### レスポンシブ対応
- **モバイル**: 320px - 767px （縦画面最適化）
- **タブレット**: 768px - 1023px （横画面対応）
- **デスクトップ**: 1024px以上 （フルスクリーン）

## 品質保証

### テスト項目
- [ ] **基本操作**: 移動、回転、落下の正常動作
- [ ] **ライン消去**: 1-4ライン同時消去の処理
- [ ] **スコア計算**: 正確な得点計算とレベルアップ
- [ ] **ゲームオーバー**: 適切な終了条件とリスタート
- [ ] **音楽再生**: BGMと効果音の正常再生
- [ ] **UI応答**: ボタンとキーボード操作の反応
- [ ] **レスポンシブ**: 各画面サイズでの表示確認

### 既知の制限事項
- Web Audio APIがサポートされていないブラウザでは音楽が再生されない
- 極端に古いブラウザではCSS3エフェクトが正常に表示されない場合がある
- モバイルデバイスでの音楽再生には初回のユーザーインタラクションが必要

## バージョン履歴

### v1.0.0 (初回リリース)
- ✅ 基本テトリスゲーム実装
- ✅ 7種類のテトロミノ対応
- ✅ レトロ風デザイン実装
- ✅ コロベイニキBGM実装
- ✅ レスポンシブUI実装
- ✅ スコア・レベルシステム実装

### 今後の予定
- v1.1.0: ハイスコア機能追加
- v1.2.0: 追加BGM・テーマ選択
- v1.3.0: マルチプレイ機能
- v2.0.0: PWA対応